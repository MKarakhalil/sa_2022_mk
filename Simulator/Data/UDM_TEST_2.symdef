%--------------------------------------------------------------------------
definitions:
%--------------------------------------------------------------------------
dynamic_states dTstart xTIME STATUS
internal_states TIME
external_states y1=1 y2=0
events +!ev_on 
parameters Ton=2 A=1 Toff=1 
parameters minval maxval minout maxout
%--------------------------------------------------------------------------
initializations:
%--------------------------------------------------------------------------
 
%--------------------------------------------------------------------------
f_equations:
%--------------------------------------------------------------------------
dt(dTstart) = 0 
dt(STATUS) = 0
if t < 0
	dt(xTIME) = 0
else
	dt(xTIME) = 1
end
%-------------------------------------------------------------------------- 
g_equations:
%--------------------------------------------------------------------------
ev_on = (TIME - Ton)
if t < 0
	y1 = 0
else
	y1 = STATUS*( K * sin( 2*pi/T*(TIME - Ton) ) )
end
TIME = xTIME 
y2 = relay(y1,minval,maxval,minout,maxout)

%--------------------------------------------------------------------------
h_equations:
%--------------------------------------------------------------------------
if ev_on == 0
    dTstart+ = TIME
    STATUS+ = 1
end
