%-------------------------------------------------------------------------------------------------
definitions:
%-------------------------------------------------------------------------------------------------
dynamic_states Xp Xq
%-------------------------------------------------------------------------------------------------
inputs VD1=1 VQ1 VT=1
%-------------------------------------------------------------------------------------------------
internal_states P1=1 Q1
%-------------------------------------------------------------------------------------------------
external_states  ID1 IQ1
%-------------------------------------------------------------------------------------------------
parameters SBASE={initial=100,unit="MVA",description="nominal power",display=true}
parameters UBASE={initial=10,unit="MVA",description="nominal power",display=true}
parameters P0={initial=1000,unit="kW",description="",display=true}
parameters Q0={initial=1,unit="kVar",description="",display=true}
parameters V0={initial=10,unit="kV",description="",display=true}
parameters VQ0={initial=10,unit="kV",description="",display=true}
parameters nP=2 nQ=2 LFTYPE=1
%-------------------------------------------------------------------------------------------------
initializations:
%-------------------------------------------------------------------------------------------------

%-------------------------------------------------------------------------------------------------
f_equations:
%-------------------------------------------------------------------------------------------------
if t < 0
   if (LFTYPE==1)
	dt(Xp) = P1 - P0/SBASE/1000
    dt(Xq) = Q1 - Q0/SBASE/1000
   else
	   if (LFTYPE==2)
		 dt(Xp) = P1 - P0/SBASE/1000
		 dt(Xq) = VT - V0/UBASE
	   else
		 dt(Xp) = VQ1 - VQ0/UBASE		 
		 dt(Xq) = VT - V0/UBASE
	   end
   end
else
	dt(Xp) = 0
	dt(Xq) = 0
end
%-------------------------------------------------------------------------------------------------
g_equations:
%-------------------------------------------------------------------------------------------------
g1 = Xp*(VT)^nP - P1
g2 = Xq*(VT)^nQ - Q1
g3 = P1 + (VD1*ID1 + VQ1*IQ1)
g4 = Q1 + (VQ1*ID1 - VD1*IQ1)
%-------------------------------------------------------------------------------------------------
h_equations:
%-------------------------------------------------------------------------------------------------